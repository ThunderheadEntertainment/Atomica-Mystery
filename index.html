<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Atomica Murder Mysteries</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0f0f0f; --card:#1c1c1c; --accent:#c41212; --text:#f5f5f5; --gold:#ffd56a; }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family:Georgia, "Times New Roman", serif; }
    .wrap { min-height:100svh; display:grid; place-items:center; padding:32px 16px; }
    .card { width:min(680px,92vw); background:var(--card); border:3px solid var(--accent); border-radius:14px; box-shadow:0 0 24px rgba(196,18,18,.45); padding:28px 26px; text-align:center; }
    h1 { font-size:2rem; color:#ff3a3a; text-transform:uppercase; letter-spacing:1.5px; margin:0 0 10px; }
    h2 { font-size:1.2rem; color:#ff5a5a; text-transform:uppercase; letter-spacing:1.2px; margin:6px 0 10px; }
    p { font-size:1.1rem; line-height:1.5; margin:10px 0; }
    .label { color:var(--gold); font-weight:700; }
    .big-letter { display:inline-block; font-size:2rem; padding:6px 14px; border:2px solid var(--gold); border-radius:10px; margin:8px 0 14px; }
    .footer { margin-top:14px; font-size:.9rem; color:#9a9a9a; }
    .hint { font-size:.95rem; color:#bdbdbd; margin:8px 0 2px; }

    /* Buttons for PDFs */
    .btn { display:inline-block; margin:8px 6px 0; padding:10px 16px; background:var(--gold); color:#1b1b1b; border-radius:10px; text-decoration:none; font-weight:700; }
    .btn:hover { filter:brightness(.95); }

    /* Inline image fallback (optional) */
    .img-grid { display:grid; gap:10px; }
    .clue-img { width:100%; height:auto; border-radius:8px; border:1px solid #444; }
    .clue-img:active { transform:scale(0.99); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card"><!-- JS injects content --></div>
  </div>

  <script>
    // ================== CLUES (no evidence/riddle fields) ==================
    const CLUES = {
      // -------- The Widow’s Demise (Atomica) --------
      "stop1": {
        title:"The Widow’s Demise",
        letter:"QR Code 1",
        next:"Next Steps: placeholder directions for the opening move (e.g., collect the first letter and proceed to the café)."
      },
      "stop2": { title:"The Widow’s Demise", letter:"QR Code 2" },
      "stop3": { title:"The Widow’s Demise", letter:"QR Code 3" },
      "stop4": { title:"The Widow’s Demise", letter:"QR Code 4" },
      "stop5": { title:"The Widow’s Demise", letter:"QR Code 5" },
      "final": { title:"The Widow’s Demise — Final", letter:"Final QR" },

      // -------- The Raven’s Ball (PDF-first) --------
      // Upload these PDFs to: /clues/ravens/ in your repo (case-sensitive)
      "stopA": {
        title:"The Raven’s Ball",
        letter:"QR Code A",
        next:"Now that you know Edgar Allan Poe's greatest rival, Rufus Grisswald, was murdered, perhaps you should seek out the spirit of Poe himself. In a long brown coat, mustachioed, and pale of face, Poe should be around here somewhere....",
        pdfs:[ "clues/ravens/A-Fatal-Celebration.pdf" ]
      },
      "stopB": {
        title:"The Raven’s Ball",
        letter:"QR Code B",
        pdfs:[ "clues/ravens/JOHN-ALLAN-ARTICLE.pdf" ]
      },
      "stopC": {
        title:"The Raven’s Ball",
        letter:"QR Code C",
        pdfs:[ "clues/ravens/MARIA-CLEM-ARTICLE.pdf" ]
      },
      "stopD": {
        title:"The Raven’s Ball",
        letter:"QR Code D",
        pdfs:[ "clues/ravens/FRANCES-OSGOOD-ARTICLE.pdf" ]
      },
      "stopE": {
        title:"The Raven’s Ball",
        letter:"QR Code E",
        next: "If you think you know who killed Rufus Grisswald, tell the town guard at the entrance to the Raven's Ball!"
        pdfs:[ "clues/ravens/ELIZABETH-ELLIOT-ARTICLE.pdf" ]
      },
      "stopF": {
        title:"The Raven’s Ball",
        letter:"QR Code F",
        pdfs:[ "clues/ravens/EDGAR-ALLAN-POE-ARTICLE.pdf" ]
      },
      "stopG": {
        title:"The Raven’s Ball",
        letter:"QR Code G"
        // Add pdfs/images here later if you have them
      },
      "finalA": {
        title:"The Raven’s Ball — Final",
        letter:"Final QR (Raven’s)"
        // Optional finale PDF/image here
      }
    };

    // ================== RENDERER ==================
    function keyFromHash(){ const raw = window.location.hash || ""; return raw.startsWith("#") ? raw.substring(1) : raw; }

    function render(){
      const key = keyFromHash();
      const clue = CLUES[key];
      const card = document.getElementById("card");

      if(!clue){
        card.innerHTML = `
          <h1>Atomica Murder Mysteries</h1>
          <p>No clue found. Use a valid QR code.</p>
          <p class="footer">Valid hashes: stop1–stop5, final, stopA–stopG, finalA.</p>
        `;
        return;
      }

      const pdfButtons = (clue.pdfs || [])
        .map((url,i)=>`<p><a class="btn" href="${url}" target="_blank" rel="noopener">Click to View Clue ${i+1} (PDF)</a></p>`)
        .join("");

      const imageBlocks = (clue.images || [])
        .map((url)=>`<div class="img-grid"><a href="${url}" target="_blank" rel="noopener"><img class="clue-img" src="${url}" alt="Clue image"></a></div>`)
        .join("");

      const nextHTML = clue.next ? `<p><span class="label">Next Steps:</span> ${clue.next}</p>` : "";

      const hint = (clue.pdfs && clue.pdfs.length && clue.images && clue.images.length)
        ? `<p class="hint">If the PDF won’t open in your app, tap the images below or choose “Open in Browser.”</p>`
        : (clue.pdfs && clue.pdfs.length ? `<p class="hint">If the PDF won’t open, try “Open in Browser.”</p>` : "");

      card.innerHTML = `
        <h1>${clue.title || 'Atomica Murder Mysteries'}</h1>
        ${clue.letter ? `<h2>${clue.letter}</h2><div class="big-letter">${clue.letter}</div>` : ""}
        ${pdfButtons}
        ${hint}
        ${imageBlocks}
        ${nextHTML}
        <div class="footer">Scan the next QR to continue…</div>
      `;
    }

    render();
    window.addEventListener("hashchange", render);
  </script>
</body>
</html>
